import( "Utilities.msg" );

int SelectDigit()
{
    while ( true )
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.R, 5 );
        int digit = MSG_SELECT( ModMenuName, Select0to4Dialog, 0 );
        if ( digit < 5 ) //0 through 4
            return digit;
        if ( digit == 999 )
        {
            return -1;
            break;
        }
        if ( digit == 5 )
        {
            SEL_DEFKEY( PadButton.Circle, 999 );
            SEL_DEFKEY( PadButton.L, 5 );
            digit = MSG_SELECT( ModMenuName, Select5to9Dialog, 0 ) + 5;
            if ( digit < 10 )
                return digit; //5 through 9 or back
            else if (digit == 999 + 5)
            {    
                digit = -1; //exit
                break;
            }
        }
    }
    return -1;
}

int SelectNumber( int digitCount )
{
    int number = 0;
    
    for ( int i = 0; i < digitCount; i++ )
    {
        int digit = SelectDigit();
        if ( digit == -1 )
        {
            // Number should only equal negative one if we cancel
            // before entering anything.
            if ( i == 0 )
            {
                number = -1;
                break;
            }
            else
                break;
        }
        number *= 10;
        number += digit;
    }
    return number;
}

int Select10Number()
{
        page1:
    SEL_DEFKEY( PadButton.Circle, 999 );
    SEL_DEFKEY( PadButton.R, 5 );
    int number = MSG_SELECT( ModMenuName, Select1to5Dialog, 0 ) + 1;
    if ( number == 999 + 1 )
        return -1;
    if ( number <= 5 )
    {
        return number;
    }
    else if ( number == 6 )
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        number = MSG_SELECT( ModMenuName, Select6to10Dialog, 0 ) + 6;
        if ( number <= 10 )
        {
            return number;
        }
        else if ( number == 11 )
        {
            goto page1;
        }
        else if ( number == 999 + 6 )
        {
            return -1;
        }
    }
    return 0;
}

int SelectUnit()
{
    for ( int i = 0; i < 32; i++ )
        SET_MSG_VAR( i, i, 4 );
        page1:
    SEL_DEFKEY( PadButton.Circle, 999 );
    SEL_DEFKEY( PadButton.R, 5 );
    int unitID = MSG_SELECT( ModMenuName, UnitSelect1, 0 ) + 1;
    if ( unitID <= 5 )
    {
        return unitID;
    }
    else if ( unitID == 999 + 1 )
    {
        return -1;
    }
    else if ( unitID == 6 ) //page 2
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        unitID = MSG_SELECT( ModMenuName, UnitSelect2, 0 ) + 6;
        if ( unitID <= 10 )
        {
            return unitID;
        }
        else if ( unitID == 11 )
        {
            goto page1;
        }
        else if ( unitID == 999 + 6 )
        {
            return -1;
        }
    }
    return unitID;
}

int SelectUnitNoProtag()
{
    for ( int i = 0; i < 32; i++ )
        SET_MSG_VAR( i, i, 4 );
        page1:
    SEL_DEFKEY( PadButton.Circle, 999 );
    SEL_DEFKEY( PadButton.R, 5 );
    int unitID = MSG_SELECT( ModMenuName, UnitSelect1, 1 ) + 1;
    if ( unitID == 999 + 1 )
        return -1;
    if ( unitID <= 5 )
        return unitID;
    if ( unitID == 6 ) //page 2
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        unitID = MSG_SELECT( ModMenuName, UnitSelect2, 0 ) + 6;
        if ( unitID == 999 + 6 )
            return -1;
        if ( unitID <= 10 )
            return unitID;
        if ( unitID == 11 )
            goto page1;
    }
    return unitID;
}

int SelectUnitNoProtagNoFuuka()
{
    for ( int i = 0; i < 32; i++ )
        SET_MSG_VAR( i, i, 4 );
        page1:
    SEL_DEFKEY( PadButton.Circle, 999 );
    SEL_DEFKEY( PadButton.R, 5 );
    int unitID = MSG_SELECT( ModMenuName, UnitSelect1, 1 ) + 1;
    if ( unitID == 999 + 1 )
        return -1;
    if ( unitID <= 5 )
        return unitID;
    if ( unitID == 6 ) //page 2
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        unitID = MSG_SELECT( ModMenuName, UnitSelect2, 1 ) + 6;
        if ( unitID == 999 + 6 )
            return -1;
        if ( unitID <= 10 )
            return unitID;
        if ( unitID == 11 )
            goto page1;
    }
    return unitID;
}

int SelectSLink()
{
    page1:
    SEL_DEFKEY( PadButton.Circle, 999 );
    SEL_DEFKEY( PadButton.R, 6 );
    int selection = MSG_SELECT( CommuDesc, CommuCharSel1, 0 ) + 1;
    if ( selection < 7 )
        return selection;
    if ( selection == 7 )
        goto page2;
    if ( selection == 999 + 1 )
        return -1;
    page2:
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        SEL_DEFKEY( PadButton.R, 6 );
        selection = MSG_SELECT( CommuDesc, CommuCharSel2, 0 ) + 7;
        if ( selection < 7 + 5 )
            return selection;
        if ( selection == 7 + 5 )
            goto page1;
        if ( selection == 7 + 6 )
            goto page3;
        if ( selection == 999 + 7 )
            return -1;
    }
    page3:
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        SEL_DEFKEY( PadButton.R, 6 );
        selection = MSG_SELECT( CommuDesc, CommuCharSel3, 0 ) + 12;
        if ( selection < 12 + 5 )
            return selection;
        if ( selection == 12 + 5 )
            goto page2;
        if ( selection == 12 + 6 )
            goto page4;
        if ( selection == 999 + 12 )
            return -1;
    }
    page4:
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 5 );
        SEL_DEFKEY( PadButton.R, 6 );
        selection = MSG_SELECT( CommuDesc, CommuCharSel4, 0 ) + 17;
        if ( selection < 17 + 5 )
            return selection;
        if ( selection == 17 + 5 )
            goto page3;
        if ( selection == 17 + 6 )
            goto page5;
        if ( selection == 999 + 17 )
            return -1;
    }
    page5:
    {
        SEL_DEFKEY( PadButton.Circle, 999 );
        SEL_DEFKEY( PadButton.L, 6 );
        selection = MSG_SELECT( CommuDesc, CommuCharSel5, 0 ) + 22;
        if ( selection < 22 + 6 )
            return selection;
        if ( selection == 22 + 6 )
            goto page4;
        if ( selection == 999 + 22 )
            return -1;
    }
    return selection;
}

int SelectYesNo()
{
    int selection = MSG_SELECT( ModMenuName, SelectYesNo, 0 );
    return selection;
}

int SelectNoYes()
{
    int selection = MSG_SELECT( ModMenuName, SelectOffOn, 0 );
    return selection;
}

int SelectOnOff()
{
    int selection = MSG_SELECT( ModMenuName, SelectOnOff, 0 );
    return selection;
}

int SelectOffOn()
{
    int selection = MSG_SELECT( ModMenuName, SelectOffOn, 0 );
    return selection;
}

int SelectOnOffCheck()
{
    int selection = MSG_SELECT( ModMenuName, SelectOnOffCheck, 0 );
    return selection;
}

void DisplayMessagePrompt( int messageId )
{
    MSG_WND_DSP(); 
    MSG( messageId ); 
    MSG_WND_CLS();
}

int SelectNumberPrompt( int messageId, int digits )
{
    MSG_WND_DSP();
    MSG( messageId );
    MSG_WND_CLS();
    int i = SelectNumber( digits );
    return i;
}

int Select10NumberPrompt( int messageId )
{
    MSG_WND_DSP();
    MSG( messageId );
    MSG_WND_CLS();
    int i = Select10Number();
    return i;
}

int SelectYesNoPrompt( int promptMessageId )
{
    MSG_WND_DSP(); 
    MSG( promptMessageId );
    int selection = SelectYesNo();
    MSG_WND_CLS();
    return selection;
}

int SelectNoYesPrompt( int promptMessageId )
{
    MSG_WND_DSP(); 
    MSG( promptMessageId );
    int selection = SelectNoYes();
    MSG_WND_CLS();
    return selection;
}

int SelectOnOffPrompt( int promptMessageId )
{
    MSG_WND_DSP(); 
    MSG( promptMessageId );
    int selection = SelectOnOff();
    MSG_WND_CLS();
    return selection;
}

int SelectOffOnPrompt( int promptMessageId )
{
    MSG_WND_DSP(); 
    MSG( promptMessageId );
    int selection = SelectOffOn();
    MSG_WND_CLS();
    return selection;
}