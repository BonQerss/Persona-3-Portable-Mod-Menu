
import( "Utilities.msg" );

int SelectDigit( int messageId )
{
	while ( true )
	{
		int digit = MSG_SELECT( MSGDummy, Select0to4Dialog, 0 );
		if ( digit < 5 ) //0 through 4
			return digit;
		if ( digit == 5 )
		{
			digit = MSG_SELECT( MSGDummy, Select5to9Dialog, 0 ) + 5;
			if ( digit < 10 )
				return digit; //5 through 9 or back
			else if (digit == 11)
			{	
				digit = -1; //exit
				break;
			}
		}
	}
	return -1;
}

int SelectNumber( int digitCount )
{
	int number = 0;
	
	for ( int i = 0; i < digitCount; i++ )
	{
		int digit = SelectDigit(MSGDummy);
        if ( digit == -1 )
        {
            // Number should only equal negative one if we cancel
            // before entering anything.
            if ( i == 0 )
            {
                number = -1;
                break;
            }
            else
                break;
        }
		number *= 10;
		number += digit;
	}
	return number;
}

int SelectUnit()
{
		page1:
	int unitID = MSG_SELECT( ModMenuName, UnitSelect1, 0 ) + 1;
	if ( unitID <= 5 )
	{
		return unitID;
	}
	else if ( unitID == 6 ) //page 2
	{
		unitID = MSG_SELECT( ModMenuName, UnitSelect2, 0 ) + 6;
		if ( unitID <= 10 )
		{
			return unitID;
		}
		else if ( unitID == 11 )
		{
			goto page1;
		}
		else if ( unitID == 12 )
		{
			return -1;
		}
	}
	return unitID;
}

int SelectUnitNoProtag()
{
		page1:
	int unitID = MSG_SELECT( ModMenuName, UnitSelect1NoProtag, 0 ) + 2;
	if ( unitID <= 5 )
	{
		return unitID;
	}
	else if ( unitID == 6 ) //page 2
	{
		unitID = MSG_SELECT( ModMenuName, UnitSelect2, 0 ) + 6;
		if ( unitID <= 10 )
		{
			return unitID;
		}
		else if ( unitID == 11 )
		{
			goto page1;
		}
		else if ( unitID == 12 )
		{
			return -1;
		}
	}
	return unitID;
}

int SelectUnitNoProtagNoFuuka()
{
		page1:
	int unitID = MSG_SELECT( ModMenuName, UnitSelect1NoProtag, 0 ) + 2;
	if ( unitID <= 5 )
	{
		return unitID;
	}
	else if ( unitID == 6 ) //page 2
	{
		unitID = MSG_SELECT( ModMenuName, UnitSelect2NoProtagNoFuuka, 0 ) + 7;
		if ( unitID <= 10 )
		{
			return unitID;
		}
		else if ( unitID == 11 )
		{
			goto page1;
		}
		else if ( unitID == 12 )
		{
			return -1;
		}
	}
	return unitID;
}

int SelectYesNo()
{
	int selection = MSG_SELECT( MSGDummy, SelectYesNo, 0 );
	return selection;
}

int SelectNoYes()
{
	int selection = MSG_SELECT( MSGDummy, SelectOffOn, 0 );
	return selection;
}

int SelectOnOff()
{
	int selection = MSG_SELECT( MSGDummy, SelectOnOff, 0 );
	return selection;
}

int SelectOffOn()
{
	int selection = MSG_SELECT( MSGDummy, SelectOffOn, 0 );
	return selection;
}

void DisplayMessagePrompt( int messageId )
{
	MSG_WND_DSP(); 
	MSG( messageId ); 
	MSG_WND_CLS();
}

int SelectNumberPrompt( int messageId, int digits )
{
	DisplayMessagePrompt( messageId );
	int i = SelectNumber( digits );
	return i;
}

int Select10NumberPrompt( int messageId )
{
	DisplayMessagePrompt( messageId );
		page1:
	int number = MSG_SELECT( MSGDummy, Select1to5Dialog, 0 ) + 1;
	if ( number <= 5 )
	{
		return number;
	}
	else if ( number == 6 )
	{
		number = MSG_SELECT( MSGDummy, Select6to10Dialog, 0 ) + 6;
		if ( number <= 10 )
		{
			return number;
		}
		else if ( number == 11 )
		{
			goto page1;
		}
		else if ( number == 12 )
		{
			return -1;
		}
	}
	return 0;
}

int SelectYesNoPrompt( int promptMessageId )
{
	MSG_WND_DSP(); 
	MSG( promptMessageId );
	int selection = SelectYesNo();
	MSG_WND_CLS();
	return selection;
}

int SelectNoYesPrompt( int promptMessageId )
{
	MSG_WND_DSP(); 
	MSG( promptMessageId );
	int selection = SelectNoYes();
	MSG_WND_CLS();
	return selection;
}

int SelectOnOffPrompt( int promptMessageId )
{
	MSG_WND_DSP(); 
	MSG( promptMessageId );
	int selection = SelectOnOff();
	MSG_WND_CLS();
	return selection;
}

int SelectOffOnPrompt( int promptMessageId )
{
	MSG_WND_DSP(); 
	MSG( promptMessageId );
	int selection = SelectOffOn();
	MSG_WND_CLS();
	return selection;
}